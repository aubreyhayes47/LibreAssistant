<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LibreAssistant</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- LibreAssistant Main UI: supports Ollama models (legacy) and plugins (MCP) -->
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <h2><i class="fas fa-brain"></i> LibreAssistant</h2>
            </div>
            <ul class="nav-list">
                <li class="nav-item">
                    <a href="#" class="nav-link active" data-view="models">
                        <i class="fas fa-cubes"></i>
                        <span>Models</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-view="server">
                        <i class="fas fa-server"></i>
                        <span>Server</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-view="requests">
                        <i class="fas fa-paper-plane"></i>
                        <span>Requests</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-view="catalogue">
                        <i class="fas fa-puzzle-piece"></i>
                        <span>Plugin Catalogue</span>

                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-view="settings">
                        <i class="fas fa-cog"></i>
                        <span>Settings</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-view="about">
                        <i class="fas fa-info-circle"></i>
                        <span>About</span>
                    </a>
                </li>
            </ul>
        </nav>

        <!-- Main Content Area -->
        <main class="main-content">
            <div class="content-wrapper">
                <!-- Models View -->
                <div id="models-view" class="view active">
                    <header class="view-header">
                        <h1>Models</h1>
                        <p>Manage your AI models</p>
                    </header>
                    <div class="view-content">
                        <div class="card">
                            <div class="models-header">
                                <h3>Available Models</h3>
                                <div class="models-controls">
                                    <button id="refresh-models-btn" class="btn btn-primary">
                                        <i class="fas fa-sync-alt"></i> Refresh
                                    </button>
                                    <button id="download-model-btn" class="btn btn-success">
                                        <i class="fas fa-download"></i> Download Model
                                    </button>
                                </div>
                            </div>
                            <div class="model-status" id="model-status" style="display: none;">
                                <div class="status-message" id="status-message"></div>
                            </div>
                            <div class="model-list" id="model-list">
                                <div class="model-item loading">
                                    <i class="fas fa-spinner fa-spin"></i>
                                    <span>Loading models...</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Download Model Modal -->
                        <div id="download-modal" class="modal" style="display: none;">
                            <div class="modal-content">
                                <span class="close">&times;</span>
                                <h3>Download Model</h3>
                                <div class="form-group">
                                    <label for="model-name-input">Model Name:</label>
                                    <input type="text" id="model-name-input" placeholder="e.g., llama2, codellama, mistral">
                                    <small>Enter the name of the model you want to download</small>
                                </div>
                                <div class="modal-actions">
                                    <button id="cancel-download-btn" class="btn btn-secondary">Cancel</button>
                                    <button id="confirm-download-btn" class="btn btn-primary">Download</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="requests-view" class="view">
                    <header class="view-header">
                        <h1>Make Requests</h1>
                        <p>Send discrete requests to LibreAssistant with plugin support</p>
                    </header>
                    <div class="view-content">
                        <div class="model-selection-bar">
                            <div class="model-selector">
                                <label for="request-model-select">Select Model:</label>
                                <select id="request-model-select">
                                    <option value="">Loading models...</option>
                                </select>
                                <button id="refresh-request-models" class="btn btn-secondary btn-small">
                                    <i class="fas fa-sync-alt"></i> Refresh
                                </button>
                            </div>
                            <div class="schema-controls">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="use-schema" checked>
                                    <span>Use JSON Schema</span>
                                </label>
                                <button id="view-schema" class="btn btn-secondary btn-small" title="View JSON schema">
                                    <i class="fas fa-code"></i> Schema
                                </button>
                            </div>
                        </div>
                        
                        <div class="requests-bar">
                            <div class="input-group">
                                <input id="request-input" type="text" placeholder="Ask LibreAssistant..." autocomplete="off" />
                                <button id="request-submit" class="btn btn-primary">
                                    <i class="fas fa-paper-plane"></i> Send
                                </button>
                            </div>
                            <ul id="autocomplete-list" class="autocomplete-list" style="display:none;"></ul>
                        </div>
                        
                        <div id="response-box" class="response-box">
                            <div class="placeholder-message">
                                <i class="fas fa-comment-dots"></i>
                                <span>Responses will appear here. Try asking a question or request!</span>
                            </div>
                        </div>
                        
                        <div id="active-plugins-bar" class="active-plugins-bar">
                            <div class="plugins-header">
                                <h4><i class="fas fa-plug"></i> Active Plugins</h4>
                                <div class="plugin-actions">
                                    <button id="refresh-plugins" class="btn btn-secondary btn-small" title="Refresh plugins">
                                        <i class="fas fa-sync-alt"></i>
                                    </button>
                                    <button id="view-system-instructions" class="btn btn-secondary btn-small" title="View system instructions">
                                        <i class="fas fa-info-circle"></i> Instructions
                                    </button>
                                </div>
                            </div>
                            <div id="plugin-pills"></div>
                            <div id="plugin-status" class="plugin-status"></div>
                        </div>
                    </div>
                </div>

                <!-- Plugin Catalogue View -->
                <div id="catalogue-view" class="view">
                    <header class="view-header">
                        <h1><i class="fas fa-puzzle-piece"></i> Plugin Catalogue</h1>
                        <p>Discover and manage LibreAssistant plugins that enhance your AI assistant with powerful capabilities</p>
                    </header>
                    <div class="view-content">
                        <div class="catalogue-controls">
                            <div class="search-filter-row">
                                <input id="plugin-search" type="text" placeholder="Search plugins by name or capability..." class="search-input">
                                <select id="plugin-filter" class="filter-select">
                                    <option value="all">All Plugins</option>
                                    <option value="enabled">Enabled Only</option>
                                    <option value="disabled">Disabled Only</option>
                                    <option value="running">Running</option>
                                    <option value="stopped">Stopped</option>
                                </select>
                                <button id="refresh-plugins-catalogue" class="btn btn-primary">
                                    <i class="fas fa-sync-alt"></i> Refresh
                                </button>
                            </div>
                        </div>
                        
                        <div class="catalogue-grid" id="catalogue-list">
                            <div class="loading-plugins">
                                <i class="fas fa-spinner fa-spin"></i>
                                <span>Loading plugins...</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Server View -->
                <div id="server-view" class="view">
                    <header class="view-header">
                        <h1>Server Monitoring</h1>
                        <p>Monitor server logs, errors, and get troubleshooting guidance</p>
                    </header>
                    <div class="view-content">
                        <nav class="server-tabs">
                            <button class="server-tab-button active" onclick="openServerTab(event, 'logs')">
                                <i class="fas fa-file-alt"></i> Server Logs
                            </button>
                            <button class="server-tab-button" onclick="openServerTab(event, 'errors')">
                                <i class="fas fa-exclamation-triangle"></i> Error Monitor
                            </button>
                            <button class="server-tab-button" onclick="openServerTab(event, 'troubleshooting')">
                                <i class="fas fa-wrench"></i> Troubleshooting
                            </button>
                        </nav>

                        <div id="logs" class="server-tab-content active">
                            <div class="monitoring-header">
                                <h3><i class="fas fa-search"></i> Server Logs</h3>
                                <div class="monitoring-controls">
                                    <button onclick="refreshLogs()" class="btn btn-primary">
                                        <i class="fas fa-sync-alt"></i> Refresh
                                    </button>
                                    <button onclick="clearLogs()" class="btn btn-secondary">
                                        <i class="fas fa-trash"></i> Clear
                                    </button>
                                    <label class="auto-refresh-toggle">
                                        <input type="checkbox" id="autoRefresh" onchange="toggleAutoRefresh()">
                                        <span>Auto-refresh</span>
                                    </label>
                                </div>
                            </div>
                            <div class="log-viewer">
                                <div id="serverLogs" class="logs-content">
                                    <div class="log-entry info">
                                        <span class="timestamp">[2024-01-15 10:30:45]</span>
                                        <span class="level">INFO</span>
                                        <span class="message">Ollama server starting...</span>
                                    </div>
                                    <div class="log-entry success">
                                        <span class="timestamp">[2024-01-15 10:30:46]</span>
                                        <span class="level">INFO</span>
                                        <span class="message">Server listening on port 11434</span>
                                    </div>
                                    <div class="log-entry info">
                                        <span class="timestamp">[2024-01-15 10:30:47]</span>
                                        <span class="level">INFO</span>
                                        <span class="message">Model loading: llama2</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="errors" class="server-tab-content">
                            <div class="monitoring-header">
                                <h3><i class="fas fa-exclamation-triangle"></i> Error Monitor</h3>
                                <div class="monitoring-controls">
                                    <button onclick="refreshErrors()" class="btn btn-primary">
                                        <i class="fas fa-sync-alt"></i> Refresh
                                    </button>
                                    <button onclick="clearErrors()" class="btn btn-secondary">
                                        <i class="fas fa-trash"></i> Clear All
                                    </button>
                                    <select id="errorFilter" onchange="filterErrors()" class="form-select">
                                        <option value="all">All Errors</option>
                                        <option value="critical">Critical</option>
                                        <option value="error">Error</option>
                                        <option value="warning">Warning</option>
                                    </select>
                                </div>
                            </div>
                            <div class="error-viewer">
                                <div id="errorList" class="errors-content">
                                    <div class="error-entry critical">
                                        <div class="error-header">
                                            <span class="timestamp">[2024-01-15 10:35:12]</span>
                                            <span class="level critical">CRITICAL</span>
                                            <span class="error-title">Model loading failed</span>
                                        </div>
                                        <div class="error-details">
                                            <p><strong>Error:</strong> Failed to load model 'llama2': insufficient memory</p>
                                            <p><strong>Stack:</strong> ModelLoader.load() at line 45</p>
                                            <p><strong>Suggestion:</strong> Free up system memory or use a smaller model</p>
                                        </div>
                                    </div>
                                    <div class="error-entry warning">
                                        <div class="error-header">
                                            <span class="timestamp">[2024-01-15 10:32:30]</span>
                                            <span class="level warning">WARNING</span>
                                            <span class="error-title">High memory usage</span>
                                        </div>
                                        <div class="error-details">
                                            <p><strong>Warning:</strong> Memory usage at 85% of available RAM</p>
                                            <p><strong>Current usage:</strong> 6.8GB / 8GB</p>
                                            <p><strong>Suggestion:</strong> Consider closing other applications or using a smaller model</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="troubleshooting" class="server-tab-content">
                            <div class="monitoring-header">
                                <h3><i class="fas fa-wrench"></i> Troubleshooting Guide</h3>
                            </div>
                            <div class="troubleshooting-content">
                                <div class="troubleshooting-section">
                                    <h4>Common Issues</h4>
                                    
                                    <div class="issue-item">
                                        <h5><i class="fas fa-circle"></i> Ollama Server Not Starting</h5>
                                        <div class="solution">
                                            <p><strong>Symptoms:</strong> Connection refused, server not responding</p>
                                            <p><strong>Solutions:</strong></p>
                                            <ul>
                                                <li>Check if Ollama is installed: <code>ollama --version</code></li>
                                                <li>Start Ollama server: <code>ollama serve</code></li>
                                                <li>Check if port 11434 is available: <code>netstat -tlnp | grep 11434</code></li>
                                                <li>Verify firewall settings allow connections on port 11434</li>
                                            </ul>
                                        </div>
                                    </div>

                                    <div class="issue-item">
                                        <h5><i class="fas fa-circle"></i> Model Loading Failures</h5>
                                        <div class="solution">
                                            <p><strong>Symptoms:</strong> "Model not found", "Failed to load model"</p>
                                            <p><strong>Solutions:</strong></p>
                                            <ul>
                                                <li>List available models: <code>ollama list</code></li>
                                                <li>Pull a model if missing: <code>ollama pull llama2</code></li>
                                                <li>Check available disk space for model downloads</li>
                                                <li>Verify model name spelling and availability</li>
                                            </ul>
                                        </div>
                                    </div>

                                    <div class="issue-item">
                                        <h5><i class="fas fa-circle"></i> Memory Issues</h5>
                                        <div class="solution">
                                            <p><strong>Symptoms:</strong> Out of memory errors, slow performance</p>
                                            <p><strong>Solutions:</strong></p>
                                            <ul>
                                                <li>Use smaller models (e.g., llama2:7b instead of llama2:70b)</li>
                                                <li>Close other memory-intensive applications</li>
                                                <li>Increase system swap space</li>
                                                <li>Consider upgrading RAM if frequently hitting limits</li>
                                            </ul>
                                        </div>
                                    </div>

                                    <div class="issue-item">
                                        <h5><i class="fas fa-circle"></i> Network Connectivity</h5>
                                        <div class="solution">
                                            <p><strong>Symptoms:</strong> Cannot reach Ollama API, timeouts</p>
                                            <p><strong>Solutions:</strong></p>
                                            <ul>
                                                <li>Test connection: <code>curl http://localhost:11434/api/version</code></li>
                                                <li>Check if Ollama is running: <code>ps aux | grep ollama</code></li>
                                                <li>Verify correct host and port configuration</li>
                                                <li>Check proxy settings if behind corporate firewall</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <div class="troubleshooting-section">
                                    <h4>System Requirements</h4>
                                    <div class="requirements">
                                        <ul>
                                            <li><strong>Memory:</strong> Minimum 8GB RAM (16GB+ recommended for larger models)</li>
                                            <li><strong>Storage:</strong> 10GB+ free space for models</li>
                                            <li><strong>CPU:</strong> Modern multi-core processor</li>
                                            <li><strong>GPU:</strong> Optional but recommended for better performance</li>
                                            <li><strong>OS:</strong> Linux, macOS, or Windows with WSL2</li>
                                        </ul>
                                    </div>
                                </div>

                                <div class="troubleshooting-section">
                                    <h4>Useful Commands</h4>
                                    <div class="commands">
                                        <div class="command-item">
                                            <code>ollama serve</code>
                                            <span>Start the Ollama server</span>
                                        </div>
                                        <div class="command-item">
                                            <code>ollama list</code>
                                            <span>List all downloaded models</span>
                                        </div>
                                        <div class="command-item">
                                            <code>ollama pull &lt;model&gt;</code>
                                            <span>Download a specific model</span>
                                        </div>
                                        <div class="command-item">
                                            <code>ollama rm &lt;model&gt;</code>
                                            <span>Remove a downloaded model</span>
                                        </div>
                                        <div class="command-item">
                                            <code>ollama ps</code>
                                            <span>Show running models</span>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Settings View -->
                <div id="settings-view" class="view">
                    <header class="view-header">
                        <h1>Settings & Configuration</h1>
                        <p>Configure your LibreAssistant server and application preferences</p>
                    </header>
                    <div class="view-content">
                        <form id="settings-form">
                            <!-- Ollama Server Settings -->
                            <section class="settings-section">
                                <h3>Ollama Server Settings</h3>
                                
                                <div class="form-group">
                                    <label for="server-url">Server URL:</label>
                                    <input type="url" id="server-url" name="serverUrl" placeholder="http://localhost:11434" required>
                                    <span class="error-message" id="server-url-error"></span>
                                </div>

                                <div class="form-group">
                                    <label for="api-timeout">API Timeout (seconds):</label>
                                    <input type="number" id="api-timeout" name="apiTimeout" min="1" max="300" value="30" required>
                                    <span class="error-message" id="api-timeout-error"></span>
                                </div>

                                <div class="form-group">
                                    <label for="max-retries">Max Connection Retries:</label>
                                    <input type="number" id="max-retries" name="maxRetries" min="0" max="10" value="3" required>
                                    <span class="error-message" id="max-retries-error"></span>
                                </div>
                            </section>

                            <!-- App Preferences -->
                            <section class="settings-section">
                                <h3>Application Preferences</h3>
                                
                                <div class="form-group">
                                    <label for="theme">Theme:</label>
                                    <select id="theme" name="theme" required>
                                        <option value="light">Light</option>
                                        <option value="dark">Dark</option>
                                        <option value="auto">Auto (System)</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label for="auto-connect">
                                        <input type="checkbox" id="auto-connect" name="autoConnect">
                                        Auto-connect on startup
                                    </label>
                                </div>

                                <div class="form-group">
                                    <label for="save-logs">
                                        <input type="checkbox" id="save-logs" name="saveLogs">
                                        Save connection logs
                                    </label>
                                </div>

                                <div class="form-group">
                                    <label for="model-cache-size">Model Cache Size (MB):</label>
                                    <input type="number" id="model-cache-size" name="modelCacheSize" min="100" max="10000" value="1000">
                                    <span class="error-message" id="model-cache-size-error"></span>
                                </div>
                            </section>

                            <div class="form-actions">
                                <button type="button" id="reset-btn" class="btn btn-secondary">Reset to Defaults</button>
                                <button type="submit" class="btn btn-primary">Save Settings</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- About View -->
                <div id="about-view" class="view">
                    <header class="view-header">
                        <h1>About</h1>
                        <p>Information about LibreAssistant</p>
                    </header>
                    <div class="view-content">
                        <div class="card">
                            <h3>LibreAssistant</h3>
                            <p>A simple GUI for managing and interacting with local AI models.</p>
                            <div class="about-info">
                                <div class="info-item">
                                    <strong>Version:</strong> 1.0.0
                                </div>
                                <div class="info-item">
                                    <strong>Description:</strong> Comprehensive GUI for local AI with requests, model management, and plugin integration
                                </div>
                                <div class="info-item">
                                    <strong>License:</strong> Apache License 2.0
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Plugin and Schema Modals -->
    <div id="schema-modal" class="modal" style="display:none;">
        <div class="modal-content">
            <span class="close" onclick="document.getElementById('schema-modal').style.display='none'">&times;</span>
            <div>
                <h3><i class="fas fa-code"></i> JSON Schema</h3>
                <div class="form-row">
                    <button id="validate-response" class="btn btn-secondary">Test Validation</button>
                    <button id="download-schema" class="btn btn-secondary">Download Schema</button>
                </div>
                <pre id="schema-content" class="schema-display"></pre>
            </div>
        </div>
    </div>

    <div id="instructions-modal" class="modal" style="display:none;">
        <div class="modal-content">
            <span class="close" onclick="document.getElementById('instructions-modal').style.display='none'">&times;</span>
            <div>
                <h3><i class="fas fa-info-circle"></i> System Instructions</h3>
                <div class="form-row">
                    <button id="refresh-instructions" class="btn btn-secondary">Refresh</button>
                    <span id="plugin-count" class="status-message"></span>
                </div>
                <pre id="instructions-content" class="instructions-display"></pre>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.5/dist/purify.min.js"></script>
    <script src="{{ url_for('static', filename='js/markdown-utils.js') }}"></script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>

    <!-- Enhanced Plugin Catalogue Styles -->
    <style>
        .catalogue-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .plugin-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 1.5rem;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .plugin-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .plugin-card.enabled {
            border-color: #27ae60;
            background: linear-gradient(145deg, #ffffff 0%, #f8fff9 100%);
        }

        .plugin-card.disabled {
            border-color: #e74c3c;
            background: linear-gradient(145deg, #ffffff 0%, #fff8f8 100%);
            opacity: 0.9;
        }

        .plugin-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #3498db, #9b59b6, #e74c3c, #f39c12);
            opacity: 0.8;
        }

        .plugin-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
            gap: 1rem;
        }

        .plugin-title {
            margin: 0 0 0.5rem 0;
            color: #2c3e50;
            font-size: 1.3rem;
            font-weight: 600;
            line-height: 1.2;
        }

        .plugin-author {
            font-size: 0.85rem;
            color: #7f8c8d;
            margin: 0;
        }

        .plugin-status-badge {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.4rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            white-space: nowrap;
        }

        .plugin-status-badge.running {
            background: #e8f5e8;
            color: #27ae60;
            border: 1px solid #c3e6c3;
        }

        .plugin-status-badge.stopped {
            background: #ffebee;
            color: #e74c3c;
            border: 1px solid #ffcdd2;
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: currentColor;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .plugin-description {
            color: #34495e;
            line-height: 1.5;
            margin: 0 0 1rem 0;
            font-size: 0.95rem;
        }

        .plugin-capabilities {
            margin: 1rem 0;
        }

        .capabilities-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: #5d6d7e;
            margin: 0 0 0.5rem 0;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .capability-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.4rem;
        }

        .capability-tag {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 0.3rem 0.7rem;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: 500;
            text-transform: capitalize;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .plugin-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 0.8rem;
            margin: 1rem 0;
            padding: 0.8rem;
            background: #f8f9fa;
            border-radius: 8px;
            font-size: 0.8rem;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.3rem;
            color: #6c757d;
        }

        .meta-item i {
            color: #95a5a6;
        }

        .plugin-usage-examples {
            margin: 1rem 0;
            padding: 1rem;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }

        .usage-title {
            font-size: 0.85rem;
            font-weight: 600;
            color: #2c3e50;
            margin: 0 0 0.5rem 0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .usage-examples {
            display: flex;
            flex-direction: column;
            gap: 0.3rem;
        }

        .usage-example {
            font-size: 0.8rem;
            color: #5d6d7e;
            padding: 0.2rem 0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .usage-example::before {
            content: '→';
            color: #3498db;
            font-weight: bold;
        }

        .plugin-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
            margin-top: 1.5rem;
        }

        .plugin-btn {
            padding: 0.7rem 1rem;
            border: none;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            text-decoration: none;
        }

        .plugin-btn-enable {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(39, 174, 96, 0.3);
        }

        .plugin-btn-enable:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(39, 174, 96, 0.4);
        }

        .plugin-btn-disable {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.3);
        }

        .plugin-btn-disable:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(231, 76, 60, 0.4);
        }

        .plugin-btn-details {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }

        .plugin-btn-details:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4);
        }

        .plugin-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        .empty-catalogue {
            grid-column: 1 / -1;
            text-align: center;
            padding: 3rem;
            color: #7f8c8d;
        }

        .empty-catalogue i {
            font-size: 4rem;
            margin-bottom: 1rem;
            color: #bdc3c7;
        }

        .empty-catalogue h3 {
            margin: 1rem 0 0.5rem 0;
            color: #5d6d7e;
        }

        .loading-plugins {
            grid-column: 1 / -1;
            text-align: center;
            padding: 3rem;
            color: #7f8c8d;
        }

        .loading-plugins i {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: #3498db;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .catalogue-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .plugin-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }
            
            .plugin-actions {
                grid-template-columns: 1fr;
            }
            
            .capability-tags {
                justify-content: flex-start;
            }
            
            .plugin-meta {
                flex-direction: column;
                gap: 0.4rem;
            }
        }
    </style>
</body>
</html>