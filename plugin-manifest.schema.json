{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "LibreAssistant Plugin Manifest",
  "type": "object",
  "required": [
    "name", "id", "version", "description", "author", "entrypoint", "mcp_port", "permissions"
  ],
  "properties": {
    "name": {
      "type": "string",
      "description": "Human-readable plugin name."
    },
    "id": {
  "type": "string",
  "pattern": "^[a-z0-9\\-]+$",
  "description": "Unique plugin identifier (lowercase, hyphens allowed)."
    },
    "version": {
      "type": "string",
      "description": "Plugin version (semver)."
    },
    "description": {
      "type": "string",
      "description": "Short description of the plugin."
    },
    "author": {
      "type": "string",
      "description": "Plugin author or maintainer."
    },
    "entrypoint": {
      "type": "string",
      "description": "Command to launch the MCP server (e.g., 'python3 server.py')."
    },
    "mcp_port": {
      "type": "integer",
      "minimum": 1024,
      "maximum": 65535,
      "description": "Port the plugin MCP server listens on."
    },
    "permissions": {
      "type": "array",
      "items": { "type": "string" },
      "description": "List of permissions required by the plugin."
    },
    "capabilities": {
      "type": "object",
      "description": "Plugin capabilities organized by category, with detailed information for LLM integration",
      "additionalProperties": {
        "type": "object",
        "description": "Capability category (e.g., 'file_operations', 'web_search')",
        "additionalProperties": {
          "type": "object",
          "description": "Individual capability within the category",
          "properties": {
            "description": {
              "type": "string",
              "description": "Description of what this capability does"
            },
            "input_example": {
              "type": "object",
              "description": "Example input format for this capability"
            },
            "use_cases": {
              "type": "array",
              "items": { "type": "string" },
              "description": "List of common use cases for this capability"
            }
          },
          "required": ["description"],
          "additionalProperties": false
        }
      }
    },
    "config": {
      "type": "object",
      "description": "User-configurable fields for the plugin.",
      "additionalProperties": {
        "type": "object",
        "required": ["type", "description"],
        "properties": {
          "type": { "type": "string" },
          "description": { "type": "string" },
          "required": { "type": "boolean" },
          "default": {}
        }
      }
    },
    "homepage": {
      "type": "string",
      "format": "uri",
      "description": "URL for plugin documentation or homepage."
    },
    "license": {
      "type": "string",
      "description": "License identifier (e.g., Apache-2.0)."
    }
  },
  "additionalProperties": false
}
